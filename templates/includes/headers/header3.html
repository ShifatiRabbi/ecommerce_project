{% load static i18n %}
<header class="main-header header-3">
    <!-- Main Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <!-- Logo -->
            <a class="navbar-brand" href="{% url 'core:home' %}">
                {% if site_settings.site_logo %}
                <img src="{{ site_settings.site_logo.url }}" alt="{{ site_settings.site_name }}" height="35">
                {% else %}
                <span class="h4 fw-bold text-white">{{ site_settings.site_name }}</span>
                {% endif %}
            </a>

            <!-- Right Actions for Mobile -->
            <div class="d-flex d-lg-none align-items-center">
                <button class="btn btn-link text-white me-2 search-toggle">
                    <i class="fas fa-search"></i>
                </button>
                <a href="{% url 'cart:cart_detail' %}" class="btn btn-link text-white position-relative me-2">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary cart-count">
                        {{ cart|length }}
                    </span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>

            <!-- Main Menu -->
            <div class="collapse navbar-collapse" id="navbarMain">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="{% url 'core:home' %}">{% trans "Home" %}</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            {% trans "Shop" %}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'shop:shop' %}">{% trans "All Products" %}</a></li>
                            <li><hr class="dropdown-divider"></li>
                            {% for category in categories %}
                            <li><a class="dropdown-item" href="{{ category.get_absolute_url }}">{{ category.name }}</a></li>
                            {% endfor %}
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'core:contact' %}">{% trans "Contact" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">{% trans "Blog" %}</a>
                    </li>
                </ul>

                <!-- Right Actions for Desktop -->
                <div class="d-none d-lg-flex align-items-center">
                    <!-- Search -->
                    <div class="search-container me-3">
                        <button class="btn btn-link text-white search-toggle">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <!-- Language Switcher -->
                    <div class="dropdown me-3">
                        <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-globe me-1"></i> {{ request.LANGUAGE_CODE|upper }}
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item change-language" href="#" data-lang="en">English</a></li>
                            <li><a class="dropdown-item change-language" href="#" data-lang="bn">বাংলা</a></li>
                        </ul>
                    </div>
                    
                    <!-- User Account -->
                    {% if user.is_authenticated %}
                    <div class="dropdown me-3">
                        <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user me-1"></i> {{ user.get_short_name|default:user.username }}
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'admin_dashboard:dashboard' %}"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i> My Account</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'admin_dashboard:admin_logout' %}"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                        </ul>
                    </div>
                    {% else %}
                    <a href="#" class="btn btn-outline-light btn-sm me-3"><i class="fas fa-sign-in-alt me-1"></i> {% trans "Login" %}</a>
                    {% endif %}
                    
                    <!-- Wishlist -->
                    <a href="#" class="btn btn-link text-white position-relative me-3">
                        <i class="fas fa-heart"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            3
                        </span>
                    </a>
                    
                    <!-- Cart -->
                    <a href="{% url 'cart:cart_detail' %}" class="btn btn-link text-white position-relative">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary cart-count">
                            {{ cart|length }}
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Search Overlay -->
    <div class="search-overlay bg-dark">
        <div class="container">
            <div class="search-content">
                <form action="{% url 'shop:shop' %}" method="get" class="search-form">
                    <div class="input-group">
                        <input type="text" name="search" class="form-control form-control-lg border-0" placeholder="{% trans 'Search products...' %}">
                        <button class="btn btn-primary btn-lg" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="btn btn-outline-light btn-lg search-close" type="button">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</header>